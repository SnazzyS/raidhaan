import{a as o,o as w,i as f,j as B,d as t,c as y,g as l,m as E,t as S,l as h,b as $}from"./app-DDIZjqGS.js";import{_ as q}from"./AppLayout-DcxM-feb.js";import{_ as A}from"./OrderForm-BYNa3UUM.js";import{u as I}from"./auth-CcBkgkiN.js";const N={class:"space-y-6"},j={key:0,class:"space-y-4"},C={key:1,class:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-6 text-sm text-rose-600"},M={__name:"Edit",props:{orderId:{type:Number,required:!0}},setup(_){const i=_,g=I(),u=o(!0),d=o(!1),r=o(""),n=o(null),c=async()=>{var a,e;try{const{data:s}=await h.get(`/orders/${i.orderId}`);n.value=s,r.value=""}catch(s){r.value=((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)??"Unable to load this order."}finally{u.value=!1}},k=async a=>{var e,s,m,p,b,v;d.value=!0,r.value="";try{await h.put(`/orders/${i.orderId}`,a),$.visit("/orders")}catch(x){r.value=((s=(e=x.response)==null?void 0:e.data)==null?void 0:s.message)??((v=(b=(p=(m=x.response)==null?void 0:m.data)==null?void 0:p.errors)==null?void 0:b.order)==null?void 0:v[0])??"Failed to update the order."}finally{d.value=!1}};return w(async()=>{g.ensureAuthenticated(),await c()}),(a,e)=>(l(),f(q,null,{default:B(()=>[t("section",N,[e[1]||(e[1]=t("header",{class:"border-b border-slate-200 pb-4"},[t("h1",{class:"text-2xl font-semibold text-slate-900"},"Update order"),t("p",{class:"text-sm text-slate-500"}," Adjust the order items, fulfilment details, or mark completion. ")],-1)),u.value?(l(),y("div",j,[...e[0]||(e[0]=[t("div",{class:"h-10 w-1/2 animate-pulse rounded-xl bg-slate-100"},null,-1),t("div",{class:"h-48 animate-pulse rounded-2xl bg-slate-100"},null,-1),t("div",{class:"h-48 animate-pulse rounded-2xl bg-slate-100"},null,-1)])])):r.value&&!n.value?(l(),y("div",C,[E(S(r.value)+" ",1),t("button",{type:"button",class:"mt-3 inline-flex items-center rounded-lg border border-rose-300 px-3 py-1.5 text-xs font-semibold text-rose-600 transition hover:border-rose-400 hover:text-rose-700",onClick:c}," Retry ")])):(l(),f(A,{key:2,mode:"edit","initial-order":n.value,submitting:d.value,error:r.value,onSubmit:k},null,8,["initial-order","submitting","error"]))])]),_:1}))}};export{M as default};
