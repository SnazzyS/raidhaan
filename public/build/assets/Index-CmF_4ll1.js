import{r as _,a as p,h as w,o as k,i as S,j as F,d as t,c as d,e as b,w as N,f as g,v as y,t as a,g as r,F as R,k as V,l as B}from"./app-DDIZjqGS.js";import{_ as C}from"./AppLayout-DcxM-feb.js";import{u as D}from"./auth-CcBkgkiN.js";const M={class:"space-y-6"},T={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},U={class:"flex flex-col gap-2"},j={class:"flex flex-col gap-2"},A={class:"mt-6 grid gap-4 sm:grid-cols-3"},E={class:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4"},I={class:"mt-2 text-2xl font-semibold text-slate-900"},L={class:"rounded-2xl border border-slate-200 bg-slate-50/70 p-4 sm:col-span-2"},q={class:"mt-2 text-2xl font-semibold text-slate-900"},z={key:0,class:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600"},O={class:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm"},P={key:0,class:"space-y-4 px-6 py-6"},$={key:1,class:"min-w-full divide-y divide-slate-200 text-sm text-slate-600"},G={class:"divide-y divide-slate-100"},H={key:0,class:"bg-slate-50/60"},J={class:"px-6 py-4 font-semibold text-slate-900"},K={class:"px-6 py-4 capitalize"},Q={class:"px-6 py-4 font-semibold text-slate-900"},W={class:"px-6 py-4 text-xs text-slate-500"},et={__name:"Index",setup(X){const v=D(),o=_({from:"",to:""}),n=p([]),c=p(!1),i=p(""),x=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"MVR",minimumFractionDigits:2}).format(l??0),u=async()=>{var e,s;c.value=!0,i.value="";const l={};o.from&&o.to&&(l.from=o.from,l.to=o.to);try{const{data:m}=await B.get("/sales",{params:l});n.value=m??[]}catch(m){i.value=((s=(e=m.response)==null?void 0:e.data)==null?void 0:s.message)??"Unable to load sales records."}finally{c.value=!1}},f=w(()=>({count:n.value.length,amount:n.value.reduce((l,e)=>l+Number(e.total??0),0)})),h=()=>{o.from="",o.to="",u()};return k(async()=>{v.ensureAuthenticated(),await u()}),(l,e)=>(r(),S(C,null,{default:F(()=>[t("section",M,[e[11]||(e[11]=t("header",{class:"border-b border-slate-200 pb-4"},[t("h1",{class:"text-2xl font-semibold text-slate-900"},"Sales"),t("p",{class:"text-sm text-slate-500"}," Review recorded sales totals by payment method and export data. ")],-1)),t("section",T,[t("form",{class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",onSubmit:N(u,["prevent"])},[t("div",U,[e[2]||(e[2]=t("label",{class:"text-xs font-semibold uppercase tracking-wide text-slate-500"}," From ",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.from=s),type:"date",class:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-900/10"},null,512),[[y,o.from]])]),t("div",j,[e[3]||(e[3]=t("label",{class:"text-xs font-semibold uppercase tracking-wide text-slate-500"}," To ",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.to=s),type:"date",class:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-900/10"},null,512),[[y,o.to]])]),t("div",{class:"flex items-end gap-3 md:col-span-2 lg:col-span-2"},[e[4]||(e[4]=t("button",{type:"submit",class:"inline-flex items-center justify-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800"}," Apply range ",-1)),t("button",{type:"button",class:"inline-flex items-center justify-center rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",onClick:h}," Reset ")])],32),t("div",A,[t("div",E,[e[5]||(e[5]=t("p",{class:"text-xs uppercase tracking-wide text-slate-500"},"Records",-1)),t("p",I,a(f.value.count),1)]),t("div",L,[e[6]||(e[6]=t("p",{class:"text-xs uppercase tracking-wide text-slate-500"},"Total amount",-1)),t("p",q,a(x(f.value.amount)),1)])]),i.value?(r(),d("div",z,a(i.value),1)):b("",!0)]),t("section",O,[e[10]||(e[10]=t("header",{class:"border-b border-slate-200 px-6 py-4"},[t("h2",{class:"text-lg font-semibold text-slate-900"},"Sales records"),t("p",{class:"text-sm text-slate-500"}," Each entry represents a confirmed sale linked to an order number. ")],-1)),c.value?(r(),d("div",P,[...e[7]||(e[7]=[t("div",{class:"h-6 w-1/2 animate-pulse rounded bg-slate-100"},null,-1),t("div",{class:"h-6 w-2/3 animate-pulse rounded bg-slate-100"},null,-1),t("div",{class:"h-6 w-1/3 animate-pulse rounded bg-slate-100"},null,-1)])])):(r(),d("table",$,[e[9]||(e[9]=t("thead",{class:"bg-slate-50 text-xs uppercase tracking-wide text-slate-500"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left font-medium"},"Order #"),t("th",{class:"px-6 py-3 text-left font-medium"},"Payment method"),t("th",{class:"px-6 py-3 text-left font-medium"},"Total"),t("th",{class:"px-6 py-3 text-left font-medium"},"Recorded on")])],-1)),t("tbody",G,[n.value.length===0?(r(),d("tr",H,[...e[8]||(e[8]=[t("td",{colspan:"4",class:"px-6 py-6 text-center text-sm text-slate-500"}," No sales found for the selected period. ",-1)])])):b("",!0),(r(!0),d(R,null,V(n.value,s=>(r(),d("tr",{key:s.id,class:"transition hover:bg-slate-50"},[t("td",J,a(s.order_number),1),t("td",K,a(s.payment_method),1),t("td",Q,a(x(s.total)),1),t("td",W,a(new Date(s.created_at).toLocaleString()),1)]))),128))])]))])])]),_:1}))}};export{et as default};
